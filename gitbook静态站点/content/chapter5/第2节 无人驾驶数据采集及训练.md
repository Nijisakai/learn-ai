# 第2节 无人驾驶数据采集及训练

---

>搭建起车道，然后运行相应的收集数据的程序，按下键盘方向键控制小车行驶，每按一次方向键，程序就会记录下一帧相应的图像。让小车平均遍历自动驾驶中可能出现的各种情况，按‘q‘退出数据采集，然后再运行相应的模型训练程序训练自动驾驶神经网络

### **硬件准备**

#### 硬件清单

- 纸
- 胶带

#### 硬件搭建-跑道

- 地面颜色为纯色，与所用纸张的颜色对比度应较大
- 跑道的宽度稍大于车的宽度  
- 可以把拐弯处的弯度设计得稍大一些

<center><img src=https://md.hass.live/track.jpg></center>

### **程序及操作**

#### 驾驶数据采集

1.打开终端，执行以下命令  

```bash
cd ~/Desktop/learn-ai/chapter5/self_driving_car
cd computer
python3 collect_training_data2.py
```

2.新建一个终端窗口，输入  

```bash
cd ~/Desktop/learn-ai/chapter5/self_driving_car
cd raspberryPi
python3 stream_client.py
```

3.进行训练，按`q`结束训练  

#### 驾驶数据训练

1.新建一个终端窗口，输入  

```bash
cd ~/Desktop/learn-ai/chapter5/self_driving_car
cd computer
sudo python3 model_training.py
```

![微信截图_20190822150220](https://md.hass.live/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190822150220.png)

2.训练完成后，训练文件在`~/Desktop/learn-ai/chapter5/self_driving_car/computer/saved_model/nn_model.xml`

#### 开始无人驾驶

>根据训练好的神经网络模型，现在我们可以实现自动驾驶

1.打开终端，输入  

```bash
cd ~/Desktop/learn-ai/chapter5/self_driving_car
cd computer
python3 rc_drive_nn_only.py
```

2.新建一个终端窗口，输入  

```bash
cd ~/Desktop/learn-ai/chapter5/self_driving_car
cd raspberryPi
python stream_client.py
```
