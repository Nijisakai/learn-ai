# 第3节 红灯停绿灯行：识别交通信号

---

>在上一章我们采用机器学习的方法制作了级联分类器来识别物体。这一部分通过深度学习的方法来训练识别特定物体

### 原理图

```sequence
摄像头->大白\n树莓派: CSI/USB
大白\n树莓派-->客户端: WiFi
Note right of 大白\n树莓派: HTTP协议传送摄像头数据\n神经网络收集和训练数据\n应用级联分类器处理交通信号
```

### 识别交通信号

#### 1.打开终端

```bash
cd ~/Desktop/learn-ai/chapter5/SelfDrivingCar
cd computer
python3 rc_driver_traffic_signal.py
```

#### 2.新建一个终端窗口

```bash
cd ~/Desktop/learn-ai/chapter5/SelfDrivingCar
cd raspberryPi
python3 stream_client.py
```

![微信截图_20190822162208](https://md.hass.live/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190822162208.png)

本节已经使用训练好的级联分类器，可以识别**STOP**交通信号牌。
当识别后，小车会自动停止。

### 识别自己的分类器

>通过修改rc_drive2.py文件，我们也可以使用**上一章中训练的级联分类器**。

#### 1.打开终端

```bash
cd ~/Desktop/learn-ai/chapter5/self_driving_car
cd computer
cp rc_driver_traffic_signal.py rc_drive_my_object.py
nano -c rc_drive_my_object.py
```

在大约45行左右，修改括号中的文件路径为上一章中训练的级联分类器路径。

![微信截图_20190822174122](https://md.hass.live/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20190822174122.png)

```python
# cascade classifiers
stop_cascade = cv2.CascadeClassifier("cascade_xml/stop_sign.xml")
light_cascade = cv2.CascadeClassifier("cascade_xml/traffic_light.xml")
```

#### 2.打开终端

```bash
cd ~/Desktop/learn-ai/chapter5/SelfDrivingCar
cd computer
python3 rc_drive_my_object.py
```

#### 3.新建一个终端窗口

```bash
cd ~/Desktop/learn-ai/chapter5/SelfDrivingCar
cd raspberryPi
python3 stream_client.py
```
