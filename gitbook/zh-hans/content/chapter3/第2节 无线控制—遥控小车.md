# 第2节 无线控制—遥控小车

---

>使用ESP8266开发板，组装并遥控一辆小车，通过网页端发送命令来遥控它

### 活动目标

- 了解HTTP通信概念
- 体验使用开发板控制电机
- 学会使用ip地址访问服务器

### 背景知识：电机

电机一般用作小车的动力系统。当电机接上正向电压时，电机会正转，当电机接上反向电压时，电机会反转。  
当电机接上的电压不同时，电机转动的速度也会有所不同。由于开发板能提供给小车的电压有限，所以我们  
通常不会直接将电机接在开发板上，而是会找一块电机驱动扩展板。

### 原理图

``` sequence
小白->手机浏览器: 1.建立局域网服务器
手机浏览器-->小白: 2.通过WiFi访问控制界面
手机浏览器-->小白: 3.提交执行动作请求，如“前进”
小白->手机浏览器: 4.服务器响应请求，让小白的动力系统执行
```

### 硬件清单

- 小车套件(底盘和夹层，电机，车轮，万向轮，铜柱等)
- ESP8266开发板
- 电机扩展板
- 杜邦线，数据线
- 移动电源

### 实验：WiFi小车

#### 1.硬件连接

- 将两个车轮分别与电机相连
![motor](https://md.hass.live/motor.png)

- 使用理线带，将电机和万向轮固定在底盘上
![step1](https://md.hass.live/step1.jpg)

- 使用铜柱，增加一层夹层
![step2](https://md.hass.live/step2.jpg)
![step3](https://md.hass.live/step3.jpg)

- 将ESP8266开发板和电机扩展板如图相连，将电机连接到图示位置。
![step4](https://md.hass.live/step4.jpg)

![电机连接](https://md.hass.live/niji/2019-05-07-Xnip2019-05-07_17-10-07.png)

- 使用数据线连接ESP8266开发板和移动电源，将移动电源置于小车夹层并加以固定
![step5](https://md.hass.live/step5.jpg)

#### 2.烧录程序到开发板

1).打开项目文件夹`learn-ai/codes/chapter3/part2_WiFiCar/ESP8266_wificar_http`
2).将ESP8266通过数据线连接到电脑  
3).使用Arduino IDE打开文件`ESP8266_wificar_http.ino`  
4).记得把前面的[环境准备](#setup-2)部分再次确认，将环境正确配置，然后点击上传按钮进行上传  

![上传](https://md.hass.live/niji/2019-05-08-Xnip2019-05-08_10-15-02.png?imageView2/0/interlace/1/q/46|imageslim)

5).点击`工具`菜单，选择`ESP8266 Sketch Data Upload`,会自动将项目目录下的data文件夹上传到ESP8266开发板上

#### 3.开始无线控制

1).打开[路由器管理地址](http://192.168.123.1)，ESP8266此时应该已经加入到了局域网中，查看ESP8266获取到的路由器地址  
2).将ESP8266与电脑连接断开，连接到移动电源上  
3).在浏览器中打开ESP8266获取到的局域网地址，通过点击上下左右按钮或键盘的光标键来控制小车  
4).通过[内网转发](https://github.com/fatedier/frp/blob/master/README_zh.md)技术，**同学们在家里可以[打开这里](http://hass.live:9034)来查看老师手边传感器的实时读数。**

![微信截图_20200324132334](https://md.hass.live/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20200324132334.png)
