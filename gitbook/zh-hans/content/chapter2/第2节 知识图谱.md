# 第2节 知识图谱

---

> 知识图谱是由 Google 公司在 2012 年提出来的一个新的概念。从学术的角度，我们可以对知识图谱给一个这样的定义：**知识图谱本质上是语义网络（Semantic Network）的知识库**。

### 知识图谱在线体验

<center><iframe src="http://hass.live:9022/kgqa-demo" width="100%" height="1200" scrolling="yes" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe></center>

这是一个集自然语言处理，统计机器学习和知识图谱，有关医药领域的初级自动问答系统。  
该问答系统可以解析输入的自然语言问句生成相应的后台查询指令，进一步请求后台基于TDB知识库相关服务，进而得到问题的结果。  
源代码地址：</>

---

从实际应用的角度出发其实可以简单地把知识图谱理解成多关系图（Multi-relational Graph）。那什么叫多关系图呢？ 学图是由节点（Vertex）和边（Edge）来构成，但这些图通常只包含一种类型的节点和边。但相反，多关系图一般包含多种类型的节点和多种类型的边。比如左下图表示一个经典的图结构，右边的图则表示多关系图，因为图里包含了多种类型的节点和边。这些类型由不同的颜色来标记。

![关系图](http://pic-learn-ai.oss-cn-beijing.aliyuncs.com/relationalGraph.png)

在知识图谱里，我们通常用 “实体（Entity）” 来表达图里的节点、用 “关系（Relation）” 来表达图里的 “边”。实体指的是现实世界中的事物比如人、地名、概念、药物、公司等，关系则用来表达不同实体之间的某种联系，比如人 -“居住在”- 北京、张三和李四是 “朋友”、逻辑回归是深度学习的 “先导知识” 等等。

现实世界中的很多场景非常适合用知识图谱来表达。 比如一个社交网络图谱里，我们既可以有 “人” 的实体，也可以包含 “公司” 实体。人和人之间的关系可以是 “朋友”，也可以是 “同事” 关系。人和公司之间的关系可以是 “现任职” 或者 “曾任职” 的关系。 类似的，一个风控知识图谱可以包含 “电话”、“公司” 的实体，电话和电话之间的关系可以是 “通话” 关系，而且每个公司它也会有固定的电话。

![关系图例子](http://pic-learn-ai.oss-cn-beijing.aliyuncs.com/relationalGraphExample.png)

### 我们为什么需要知识图谱

当你看到下面这行文本时会想到什么？

> Ronaldo Luís Nazário de Lima

估计绝大多数中国人不明白上面的文本代表什么意思。没关系，我们看看它对应的中文：

> 罗纳尔多・路易斯・纳萨里奥・德・利马

现在大多数人应该能够明白这是一个外国人的名字。熟悉足球的人可能会知道这是一个巴西足球运动员。

之所以举这样一个例子，是因为，计算机一直面临着这样的困境 —— 无法获取网络文本的语义信息。尽管近些年人工智能得到了长足的发展，在某些任务上取得超越人类的成绩，但离一台机器拥有一个两三岁小孩的智力这样一个目标还有一段距离。这距离的背后很大一部分原因是机器缺少知识。如同上面的例子，机器看到文本的反应和我们看到罗纳尔多葡萄牙语原名的反应别无二致。为了让机器能够理解文本背后的含义，我们需要对可描述的事物 (实体) 进行建模，填充它的属性，拓展它和其他事物的联系，即，构建机器的先验知识。就以罗纳尔多这个例子说明，当我们围绕这个实体进行相应的扩展，我们就可以得到下面这张知识图。

![罗纳尔多的知识图例子](http://pic-learn-ai.oss-cn-beijing.aliyuncs.com/RonaldoKGSimple.jpg)

机器拥有了这样的先验知识，当它再次看到 Ronaldo Luís Nazário de Lima，它就会 “想”：“这是一个名字叫 Ronaldo Luís Nazário de Lima 的巴西足球运动员。” 这和我们人类在看到熟悉的事物，会做一些联想和推理是很类似的。

> 需要说明的是，上面的知识图这是一张草图，并不代表知识图谱的实际组织形式，相反，它还会让读者对知识图谱产生一定的误解。

Google 为了提升搜索引擎返回的答案质量，推出了知识图谱概念。有知识图谱的辅助，搜索引擎能够根据用户查询背后的语义信息，返回更准确、更结构化的信息。Google 知识图谱的宣传语 “things not strings” 道出了知识图谱的精髓：不要无意义的字符串，需要文本背后的对象或事物。

我们可以把知识图谱认为是一个知识库。比如在 Google 搜索引擎里输入 “Who is the wife of Bill Gates?”，我们直接可以得到答案 -“Melinda Gates”。这是因为我们在系统层面上已经创建好了一个包含 “Bill Gates” 和 “Melinda Gates” 的实体以及他俩之间关系的知识库。所以，当我们执行搜索的时候，就可以通过关键词提取（"Bill Gates", "Melinda Gates", "wife"）以及知识库上的匹配可以直接获得最终的答案。这种搜索方式跟传统的搜索引擎是不一样的，一个传统的搜索引擎它返回的是网页、而不是最终的答案。我们只能得到包含这个关键词的网页，然后不得不点击进入相关网页查找需要的信息，所以就多了一层用户自己筛选并过滤信息的过程。

![比尔盖茨妻子搜索结果](http://pic-learn-ai.oss-cn-beijing.aliyuncs.com/BillGoogleResult.png)

## 知识图谱的前世今生

通过上面这个例子，大家应该对知识图谱有了一个初步的印象，其本质是为了表示知识。

其实知识图谱的概念并不新，它背后的思想可以追溯到上个世纪五六十年代所提出的一种知识表示形式 —— 语义网络 (Semantic Network)。语义网络由相互连接的节点和边组成，节点表示概念或者对象，边表示他们之间的关系 (is-a 关系，比如：猫是一种哺乳动物；part-of 关系，比如：脊椎是哺乳动物的一部分)，如下图。在表现形式上，语义网络和知识图谱相似，但语义网络更侧重于描述概念与概念之间的关系，（有点像生物的层次分类体系 —— 界门纲目科属种），而知识图谱则更偏重于描述实体之间的关联。

![生物图谱](http://pic-learn-ai.oss-cn-beijing.aliyuncs.com/bioGraph.jpg)

## 知识抽取

知识图谱的构建是后续应用的基础，而且构建的前提是需要把数据从不同的数据源中抽取出来。对于垂直领域的知识图谱来说，它们的数据源主要来自两种渠道：一种是**业务本身的数据**，这部分数据通常包含在公司内的数据库表并以结构化的方式存储；另一种是**网络上公开、抓取的数据**，这些数据通常是以网页的形式存在所以是非结构化的数据。

前者一般只需要简单预处理即可以作为后续 AI 系统的输入，但后者一般需要借助于自然语言处理等技术来提取出结构化信息。比如在上面的搜索例子里，Bill Gates 和 Malinda Gate 的关系就可以从非结构化数据中提炼出来，比如维基百科等数据源。

## 知识图谱的存储

知识图谱主要有两种存储方式：一种是基于 RDF 的存储；另一种是基于图数据库的存储。它们之间的区别如下图所示。

在知识图谱中我们用 RDF 形式化的表示这种三元关系。RDF，Resource Description Framework，资源描述框架，是 W3C 制定的一种用于描述实体 / 资源的标准数据模型。RDF 中有三种类型：IRI、blank node 和 literals，常用的是 IRI 和 literals。

IRI，International Resource Identifier，可以看做是 URI 或 URL 的泛化，用于在整个知识图谱中唯一的表示一个实体 / 资源。

literals，字面量，可以看做是带有数据类型的纯文本，比如罗纳尔多的全名是 Ronaldo Luís Nazário de Lima 这个字面量可以表示为：

```text
Ronaldo Luís Nazário de Lima"^^xsd:string
```

那么，“罗纳尔多的中文名是罗纳尔多・路易斯・纳扎里奥・达・利马” 这个 SPO 三元组用 RDF 形式表示就是：

![罗纳尔多中文](http://pic-learn-ai.oss-cn-beijing.aliyuncs.com/RonaldoChineseName.jpg)

```bash
http://www.kg.com/person/1 kg:fullName "Ronaldo Luís Nazário de Lima"^^xsd:string
```

将上面的知识图用更正式的形式画出来：

![罗纳尔多知识图谱](http://pic-learn-ai.oss-cn-beijing.aliyuncs.com/RonaldoKGFull.jpg)
