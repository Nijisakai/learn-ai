{
  "_from": "shoe",
  "_id": "shoe@0.0.15",
  "_inBundle": false,
  "_integrity": "sha1-uu2PGn8I9TC2bwkUKH/KplsSRDo=",
  "_location": "/shoe",
  "_phantomChildren": {},
  "_requested": {
    "escapedName": "shoe",
    "fetchSpec": "latest",
    "name": "shoe",
    "raw": "shoe",
    "rawSpec": "",
    "registry": true,
    "saveSpec": null,
    "type": "tag"
  },
  "_requiredBy": [
    "#USER",
    "/phantom"
  ],
  "_resolved": "https://registry.npmjs.org/shoe/-/shoe-0.0.15.tgz",
  "_shasum": "baed8f1a7f08f530b66f0914287fcaa65b12443a",
  "_shrinkwrap": null,
  "_spec": "shoe",
  "_where": "C:\\Users\\hyinn\\Desktop\\test",
  "author": {
    "email": "mail@substack.net",
    "name": "James Halliday",
    "url": "http://substack.net"
  },
  "browserify": "browser.js",
  "bugs": {
    "url": "https://github.com/substack/shoe/issues"
  },
  "bundleDependencies": [
    "sockjs-client"
  ],
  "dependencies": {
    "sockjs": "0.3.7",
    "sockjs-client": "*"
  },
  "deprecated": false,
  "description": "streaming sockjs for node and the browser",
  "devDependencies": {
    "tape": "~1.0.4",
    "testling": "~1.4.1",
    "through": "~2.3.4"
  },
  "directories": {
    "example": "example"
  },
  "engine": {
    "node": ">=0.6"
  },
  "homepage": "https://github.com/substack/shoe",
  "keywords": [
    "websocket",
    "stream",
    "sock",
    "browserify"
  ],
  "license": "MIT",
  "main": "index.js",
  "name": "shoe",
  "optionalDependencies": {},
  "readme": "shoe\r\n====\r\n\r\nStreaming sockjs for node and the browser.\r\n\r\nThis is a more streaming,\r\n[more unixy](http://www.faqs.org/docs/artu/ch01s06.html)\r\ntake on [sockjs](https://github.com/sockjs/sockjs-node).\r\n\r\n* works with [browserify](https://github.com/substack/node-browserify)\r\n([modularity](http://www.faqs.org/docs/artu/ch01s06.html#id2877537))\r\n* stream all the things\r\n([composition](http://www.faqs.org/docs/artu/ch01s06.html#id2877684))\r\n* emits a `'log'` event instead of spamming stdout\r\n([silence](http://www.faqs.org/docs/artu/ch01s06.html#id2878450))\r\n\r\n![shoe point javascript](http://substack.net/images/shoe.png)\r\n\r\nexample\r\n=======\r\n\r\nstream all the things\r\n---------------------\r\n\r\nBrowser code that takes in a stream of 0s and 1s from the server and inverts\r\nthem:\r\n\r\n``` js\r\nvar shoe = require('shoe');\r\nvar through = require('through');\r\n\r\nvar result = document.getElementById('result');\r\n\r\nvar stream = shoe('/invert');\r\nstream.pipe(through(function (msg) {\r\n    result.appendChild(document.createTextNode(msg));\r\n    this.queue(String(Number(msg)^1));\r\n})).pipe(stream);\r\n```\r\n\r\nServer code that hosts some static files and emits 0s and 1s:\r\n\r\n``` js\r\nvar shoe = require('shoe');\r\nvar http = require('http');\r\n\r\nvar ecstatic = require('ecstatic')(__dirname + '/static');\r\n\r\nvar server = http.createServer(ecstatic);\r\nserver.listen(9999);\r\n\r\nvar sock = shoe(function (stream) {\r\n    var iv = setInterval(function () {\r\n        stream.write(Math.floor(Math.random() * 2));\r\n    }, 250);\r\n    \r\n    stream.on('end', function () {\r\n        clearInterval(iv);\r\n    });\r\n    \r\n    stream.pipe(process.stdout, { end : false });\r\n});\r\nsock.install(server, '/invert');\r\n```\r\n\r\nThe server emits 0s and 1s to the browser, the browser inverts them and sends\r\nthem back, and the server dumps the binary digits to stdout.\r\n\r\nBy default, there's no logspam on stdout to clutter the output, which is a\r\nfrustrating trend in realtimey websocket libraries that violates the\r\n[rule of silence](http://www.faqs.org/docs/artu/ch01s06.html#id2878450).\r\n\r\nJust wait for a client to connect and you'll see:\r\n\r\n```\r\n$ node server.js\r\n001011010101101000101110010000100\r\n```\r\n\r\nwith dnode\r\n----------\r\n\r\nSince dnode has a simple streaming api it's very simple to plug into shoe.\r\n\r\nJust hack up some browser code:\r\n\r\n``` js\r\nvar shoe = require('shoe');\r\nvar dnode = require('dnode');\r\n\r\nvar result = document.getElementById('result');\r\nvar stream = shoe('/dnode');\r\n\r\nvar d = dnode();\r\nd.on('remote', function (remote) {\r\n    remote.transform('beep', function (s) {\r\n        result.textContent = 'beep => ' + s;\r\n    });\r\n});\r\nd.pipe(stream).pipe(d);\r\n```\r\nand hack up a server piping shoe streams into dnode:\r\n\r\n``` js\r\nvar shoe = require('shoe');\r\nvar dnode = require('dnode');\r\n\r\nvar http = require('http');\r\nvar ecstatic = require('ecstatic')(__dirname + '/static');\r\n\r\nvar server = http.createServer(ecstatic);\r\nserver.listen(9999);\r\n\r\nvar sock = shoe(function (stream) {\r\n    var d = dnode({\r\n        transform : function (s, cb) {\r\n            var res = s.replace(/[aeiou]{2,}/, 'oo').toUpperCase();\r\n            cb(res);\r\n        }\r\n    });\r\n    d.pipe(stream).pipe(d);\r\n});\r\nsock.install(server, '/dnode');\r\n```\r\n\r\nThen open up `localhost:9999` in your browser and you should see:\r\n\r\n```\r\nbeep => BOOP\r\n```\r\n\r\nwith express or connect\r\n-----------------------\r\n\r\nyou must pass the return value of `app.listen(port)`\r\n\r\n``` js\r\nvar shoe = require('shoe');\r\n\r\nvar express = require('express')\r\nvar app = express()\r\n\r\nvar sock = shoe(function (stream) { ... });\r\n\r\n// *** must pass expcess/connect apps like this:\r\nsock.install(app.listen(9999), '/dnode');\r\n```\r\n\r\nwith reconnect\r\n--------------\r\n\r\nyou can use [reconnect](https://github.com/dominictarr/reconnect) just in case your sock ends or gets disconnected.\r\n\r\n``` js\r\nvar shoe = require('shoe');\r\nvar reconnect = require('reconnect');\r\nvar es = require('event-stream');\r\nvar result = document.getElementById('result');\r\n\r\nvar r = reconnect(function (stream) {\r\n\r\n  var s = es.mapSync(function (msg) {\r\n      result.appendChild(document.createTextNode(msg));\r\n      return String(Number(msg)^1);\r\n  });\r\n  s.pipe(stream).pipe(s);\r\n\r\n}).connect('/invert')\r\n\r\n```\r\n\r\nbrowser methods\r\n===============\r\n\r\n``` js\r\nvar shoe = require('shoe')\r\n```\r\n\r\nvar stream = shoe(uri, cb)\r\n--------------------------\r\n\r\nReturn a readable/writable stream from the sockjs path `uri`.\r\n`uri` may be a full uri or just a path.\r\n\r\n`shoe` will emit a `'connect'` event when the connection is actually open,\r\n(just like in [net](http://nodejs.org/api/net.html#net_net_connect_options_connectionlistener)).\r\nwrites performed before the `'connect'` event will be buffered. passing in `cb` to \r\nshoe is a shortcut for `shoe(uri).on('connect', cb)`\r\n\r\nserver methods\r\n==============\r\n\r\n``` js\r\nvar shoe = require('shoe')\r\n```\r\n\r\nAll the methods from the sockjs exports objects are attached onto the `shoe`\r\nfunction, but the `shoe()` function itself is special.\r\n\r\nvar sock = shoe(opts, cb)\r\n-------------------------\r\n\r\nCreate a server with `sockjs.createServer(opts)` except this function also adds\r\nthe `.install()` function below.\r\n\r\nIf `cb` is specified, it fires `cb(stream)` on `'connection'` events.\r\n\r\nsock.install(server, opts)\r\n--------------------------\r\n\r\nCall `sock.installHandler()` with the default option of spamming stdout with log\r\nmessages switched off in place of just emitting `'log'` messages\r\non the `sock` object instead. This is a much less spammy default that gets out\r\nof your way.\r\n\r\nIf `opts` is a string, use it as the `opts.prefix`.\r\n\r\nserver events\r\n=============\r\n\r\nAll the messages that sockjs normally emits will be available on the `sock`\r\nobject plus the events below:\r\n\r\nsock.on('log', function (severity, msg) { ... })\r\n------------------------------------------------\r\n\r\nUsing the default logger with `sock.install()` will cause these `'log'` messages\r\nto be emitted instead of spamming stdout.\r\n\r\ninstall\r\n=======\r\n\r\nWith [npm](http://npmjs.org) do:\r\n\r\n```\r\nnpm install shoe\r\n```\r\n\r\nlicense\r\n=======\r\n\r\nMIT\r\n",
  "readmeFilename": "readme.markdown",
  "repository": {
    "type": "git",
    "url": "git://github.com/substack/shoe.git"
  },
  "scripts": {
    "test": "testling ."
  },
  "testling": {
    "browsers": [
      "ie/8..latest",
      "chrome/latest",
      "firefox/latest",
      "safari/latest",
      "opera/latest",
      "iphone/latest",
      "ipad/latest",
      "android/latest"
    ],
    "files": "test/browser.js",
    "server": "test/server.js"
  },
  "version": "0.0.15"
}
